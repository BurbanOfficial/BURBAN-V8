<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Mon Compte - BURBAN</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/loader.css">
</head>
<body>
    <!-- Loader -->
    <div id="loader" class="loader">
        <div class="loader-content">
            <img src="https://i.imgur.com/Kl9kTBg.png" alt="BURBAN" class="loader-logo">
            <div class="loader-dots">
                <div class="loader-dot"></div>
                <div class="loader-dot"></div>
                <div class="loader-dot"></div>
            </div>
        </div>
    </div>

    <nav class="nav">
        <div class="nav-container">
            <a href="index.html" class="logo"><img src="https://i.imgur.com/Kl9kTBg.png" alt="BURBAN"></a>
            <button class="hamburger">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
                    <line class="line line1" x1="3" y1="6" x2="21" y2="6"/>
                    <line class="line line2" x1="3" y1="12" x2="21" y2="12"/>
                    <line class="line line3" x1="3" y1="18" x2="21" y2="18"/>
                </svg>
            </button>
            <div class="nav-links">
                <a href="products.html?category=men" data-text="Men"><span class="link-text">Men</span></a>
                <a href="products.html?category=women" data-text="Women"><span class="link-text">Women</span></a>
                <a href="contact.html" data-text="Contact Us"><span class="link-text">Contact Us</span></a>
                <span class="nav-separator"></span>
                <a href="account.html" id="accountLink" data-text="Account"><span class="link-text">Account</span></a>
                <a href="cart.html" class="cart-link" data-text="Cart"><span class="link-text">Cart</span> <span class="cart-count">0</span></a>
            </div>
        </div>
    </nav>

    <!-- Login/Register Forms -->
    <section class="auth-section" id="authSection">
        <div class="container" style="max-width: 500px;">
            <div class="auth-tabs">
                <button class="auth-tab active" data-tab="login">Connexion</button>
                <button class="auth-tab" data-tab="register">Inscription</button>
            </div>

            <div class="auth-form active" id="loginForm">
                <h2>Connexion</h2>
                <form id="loginFormElement">
                    <input type="email" id="loginEmail" placeholder="Email" required>
                    <input type="password" placeholder="Mot de passe" required>
                    <button type="submit" class="btn-primary">Se connecter</button>
                    <button type="button" id="forgotPasswordBtn" style="background: none; border: none; color: var(--gray); text-decoration: underline; font-size: 14px; margin-top: 8px; cursor: pointer;">Mot de passe oubliÃ© ?</button>
                </form>
            </div>

            <div class="auth-form" id="registerForm">
                <h2>Inscription</h2>
                <form id="registerFormElement">
                    <input type="text" id="regFirstName" placeholder="PrÃ©nom" required>
                    <input type="text" id="regLastName" placeholder="Nom" required>
                    <input type="email" id="regEmail" placeholder="Adresse Email" required>
                    <input type="password" id="regPassword" placeholder="Mot de passe" required>
                    <div style="display: flex; gap: 8px;">
                        <select id="regPhoneCode" style="width: 200px;">
                            <option value="+213">ðŸ‡©ðŸ‡¿ AlgÃ©rie (+213)</option>
                            <option value="+49">ðŸ‡©ðŸ‡ª Allemagne (+49)</option>
                            <option value="+966">ðŸ‡¸ðŸ‡¦ Arabie Saoudite (+966)</option>
                            <option value="+61">ðŸ‡¦ðŸ‡º Australie (+61)</option>
                            <option value="+43">ðŸ‡¦ðŸ‡¹ Autriche (+43)</option>
                            <option value="+32">ðŸ‡§ðŸ‡ª Belgique (+32)</option>
                            <option value="+55">ðŸ‡§ðŸ‡· BrÃ©sil (+55)</option>
                            <option value="+1">ðŸ‡¨ðŸ‡¦ Canada (+1)</option>
                            <option value="+86">ðŸ‡¨ðŸ‡³ Chine (+86)</option>
                            <option value="+82">ðŸ‡°ðŸ‡· CorÃ©e du Sud (+82)</option>
                            <option value="+45">ðŸ‡©ðŸ‡° Danemark (+45)</option>
                            <option value="+20">ðŸ‡ªðŸ‡¬ Ã‰gypte (+20)</option>
                            <option value="+971">ðŸ‡¦ðŸ‡ª Ã‰mirats Arabes Unis (+971)</option>
                            <option value="+34">ðŸ‡ªðŸ‡¸ Espagne (+34)</option>
                            <option value="+1">ðŸ‡ºðŸ‡¸ Ã‰tats-Unis (+1)</option>
                            <option value="+358">ðŸ‡«ðŸ‡® Finlande (+358)</option>
                            <option value="+33" selected>ðŸ‡«ðŸ‡· France (+33)</option>
                            <option value="+30">ðŸ‡¬ðŸ‡· GrÃ¨ce (+30)</option>
                            <option value="+36">ðŸ‡­ðŸ‡º Hongrie (+36)</option>
                            <option value="+91">ðŸ‡®ðŸ‡³ Inde (+91)</option>
                            <option value="+62">ðŸ‡®ðŸ‡© IndonÃ©sie (+62)</option>
                            <option value="+353">ðŸ‡®ðŸ‡ª Irlande (+353)</option>
                            <option value="+39">ðŸ‡®ðŸ‡¹ Italie (+39)</option>
                            <option value="+81">ðŸ‡¯ðŸ‡µ Japon (+81)</option>
                            <option value="+352">ðŸ‡±ðŸ‡º Luxembourg (+352)</option>
                            <option value="+60">ðŸ‡²ðŸ‡¾ Malaisie (+60)</option>
                            <option value="+212">ðŸ‡²ðŸ‡¦ Maroc (+212)</option>
                            <option value="+52">ðŸ‡²ðŸ‡½ Mexique (+52)</option>
                            <option value="+47">ðŸ‡³ðŸ‡´ NorvÃ¨ge (+47)</option>
                            <option value="+64">ðŸ‡³ðŸ‡¿ Nouvelle-ZÃ©lande (+64)</option>
                            <option value="+31">ðŸ‡³ðŸ‡± Pays-Bas (+31)</option>
                            <option value="+63">ðŸ‡µðŸ‡­ Philippines (+63)</option>
                            <option value="+48">ðŸ‡µðŸ‡± Pologne (+48)</option>
                            <option value="+351">ðŸ‡µðŸ‡¹ Portugal (+351)</option>
                            <option value="+420">ðŸ‡¨ðŸ‡¿ RÃ©publique TchÃ¨que (+420)</option>
                            <option value="+40">ðŸ‡·ðŸ‡´ Roumanie (+40)</option>
                            <option value="+44">ðŸ‡¬ðŸ‡§ Royaume-Uni (+44)</option>
                            <option value="+7">ðŸ‡·ðŸ‡º Russie (+7)</option>
                            <option value="+65">ðŸ‡¸ðŸ‡¬ Singapour (+65)</option>
                            <option value="+46">ðŸ‡¸ðŸ‡ª SuÃ¨de (+46)</option>
                            <option value="+41">ðŸ‡¨ðŸ‡­ Suisse (+41)</option>
                            <option value="+66">ðŸ‡¹ðŸ‡­ ThaÃ¯lande (+66)</option>
                            <option value="+216">ðŸ‡¹ðŸ‡³ Tunisie (+216)</option>
                            <option value="+90">ðŸ‡¹ðŸ‡· Turquie (+90)</option>
                            <option value="+84">ðŸ‡»ðŸ‡³ Vietnam (+84)</option>
                            <option value="+27">ðŸ‡¿ðŸ‡¦ Afrique du Sud (+27)</option>
                        </select>
                        <input type="tel" id="regPhone" placeholder="NumÃ©ro de tÃ©lÃ©phone (optionnel)" style="flex: 1;" maxlength="15">
                    </div>
                    <input type="date" id="regBirthday" placeholder="Date de naissance" onfocus="(this.type='date')" onblur="if(!this.value)this.type='text'" required style="color: var(--gray);">
                    <style>
                        #regBirthday:before { content: attr(placeholder); color: var(--gray); }
                        #regBirthday:focus:before, #regBirthday:valid:before { content: ''; }
                    </style>
                    <button type="submit" class="btn-primary">S'inscrire</button>
                </form>
            </div>
        </div>
    </section>

    <!-- Account Dashboard -->
    <section class="account-section" id="accountSection" style="display: none;">
        <div class="container">
            <div class="account-layout">
                <aside class="account-sidebar">
                    <h2 id="userName">Mon Compte</h2>
                    <nav class="account-nav">
                        <a href="#" class="account-nav-link active" data-section="loyalty">FidÃ©litÃ©</a>
                        <a href="#" class="account-nav-link" data-section="favorites">Favoris</a>
                        <a href="#" class="account-nav-link" data-section="profile">Profil</a>
                        <a href="#" class="account-nav-link" data-section="orders">Commandes</a>
                        <a href="#" class="account-nav-link" data-section="addresses">Adresses</a>
                        <a href="#" class="account-nav-link" data-section="settings">ParamÃ¨tres</a>
                        <a href="#" id="logoutBtn">DÃ©connexion</a>
                    </nav>
                </aside>

                <div class="account-content">
                    <!-- Loyalty Section -->
                    <div class="account-panel active" id="loyaltyPanel">
                        <h3>Programme de FidÃ©litÃ©</h3>
                        <div style="background: var(--light-gray); padding: 32px; margin-bottom: 32px; text-align: center;">
                            <p style="font-size: 14px; color: var(--gray); margin-bottom: 8px;">Vos points</p>
                            <p style="font-size: 48px; font-weight: 300; margin-bottom: 0;" id="loyaltyPoints">0</p>
                            <button id="showHistoryBtn" style="background: none; border: none; color: var(--gray); text-decoration: underline; font-size: 14px; margin-top: 16px; cursor: pointer;">Afficher l'historique</button>
                        </div>
                        <div id="loyaltyHistory" style="display: none; margin-bottom: 32px;">
                            <h4 style="margin-bottom: 16px;">Historique des points</h4>
                            <div id="loyaltyHistoryList"></div>
                        </div>
                        <h4 style="margin-bottom: 16px;">Comment Ã§a marche ?</h4>
                        <div style="background: var(--light-gray); padding: 24px; margin-bottom: 24px;">
                            <p style="margin-bottom: 12px;">â€¢ Gagnez <strong>10 points</strong> pour chaque euro dÃ©pensÃ©</p>
                            <p style="margin-bottom: 12px;">â€¢ Ã‰changez vos points contre des bons de rÃ©duction lors de vos achats</p>
                            <p style="margin-bottom: 12px;">â€¢ <strong>500 points</strong> = 5â‚¬ de rÃ©duction (dÃ¨s 30â‚¬ d'achat)</p>
                            <p style="margin-bottom: 12px;">â€¢ <strong>1000 points</strong> = 10â‚¬ de rÃ©duction (dÃ¨s 40â‚¬ d'achat)</p>
                            <p style="margin-bottom: 12px;">â€¢ <strong>2000 points</strong> = 20â‚¬ de rÃ©duction (dÃ¨s 60â‚¬ d'achat)</p>
                            <p>â€¢ <strong>2500 points</strong> = 30â‚¬ de rÃ©duction (dÃ¨s 100â‚¬ d'achat)</p>
                        </div>
                    </div>

                    <!-- Favorites Section -->
                    <div class="account-panel" id="favoritesPanel">
                        <h3>Mes Favoris</h3>
                        <div id="favoritesList" class="products-grid" style="margin-top: 32px; text-align: center;">
                            <p class="empty-state">Aucun favori pour le moment</p>
                        </div>
                    </div>

                    <!-- Profile Section -->
                    <div class="account-panel" id="profilePanel">
                        <h3>Profil</h3>
                        <form id="profileForm">
                            <div class="form-row">
                                <input type="text" id="firstName" placeholder="PrÃ©nom" required>
                                <input type="text" id="lastName" placeholder="Nom" required>
                            </div>
                            <input type="email" id="email" placeholder="Email" required>
                            <input type="tel" id="phone" placeholder="TÃ©lÃ©phone">
                            <button type="submit" class="btn-primary">Enregistrer</button>
                        </form>
                    </div>

                    <!-- Orders Section -->
                    <div class="account-panel" id="ordersPanel">
                        <h3>Mes Commandes</h3>
                        <div id="ordersList">
                            <p class="empty-state">Aucune commande pour le moment</p>
                        </div>
                    </div>

                    <!-- Addresses Section -->
                    <div class="account-panel" id="addressesPanel">
                        <h3>Mes Adresses</h3>
                        <button class="btn-secondary" id="addAddressBtn">Ajouter une adresse</button>
                        <div id="addressesList"></div>
                    </div>

                    <!-- Settings Section -->
                    <div class="account-panel" id="settingsPanel">
                        <h3>ParamÃ¨tres</h3>
                        <form id="passwordForm">
                            <h4>Changer le mot de passe</h4>
                            <input type="password" placeholder="Mot de passe actuel" required>
                            <input type="password" placeholder="Nouveau mot de passe" required>
                            <input type="password" placeholder="Confirmer le mot de passe" required>
                            <button type="submit" class="btn-primary">Mettre Ã  jour</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Add Address Modal -->
    <div class="modal" id="addressModal">
        <div class="modal-content">
            <span class="modal-close">&times;</span>
            <h3>Ajouter une adresse</h3>
            <form id="addressForm">
                <input type="text" placeholder="Nom de l'adresse (ex: Maison, Bureau)" required>
                <div class="form-row">
                    <input type="text" placeholder="PrÃ©nom" required>
                    <input type="text" placeholder="Nom" required>
                </div>
                <input type="email" placeholder="Email" required>
                <input type="tel" placeholder="TÃ©lÃ©phone" required>
                <input type="text" placeholder="Adresse" required>
                <input type="text" placeholder="ComplÃ©ment d'adresse">
                <div class="form-row">
                    <input type="text" placeholder="Code postal" required>
                    <input type="text" placeholder="Ville" required>
                </div>
                <input type="text" placeholder="Pays" value="France" required>
                <button type="submit" class="btn-primary">Enregistrer</button>
            </form>
        </div>
    </div>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-col">
                    <h3>BURBAN</h3>
                    <p>Streetwear minimaliste</p>
                </div>
                <div class="footer-col">
                    <h4>Liens</h4>
                    <a href="products.html">Collection</a>
                    <a href="#">Ã€ propos</a>
                    <a href="#">Contact</a>
                </div>
                <div class="footer-col">
                    <h4>LÃ©gal</h4>
                    <a href="#">CGV</a>
                    <a href="#">Mentions lÃ©gales</a>
                    <a href="#">ConfidentialitÃ©</a>
                </div>
            </div>
            <p class="footer-copy">&copy; 2024 BURBAN. Tous droits rÃ©servÃ©s.</p>
        </div>
    </footer>

    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, signOut, updateProfile, sendPasswordResetEmail } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
        import { getFirestore, doc, setDoc, getDoc, updateDoc, arrayUnion, collection, getDocs, deleteDoc } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

        const firebaseConfig = {
            apiKey: "AIzaSyDb4AOtRT7jGENnLZ2KNwpczaG2Z77G2rc",
            authDomain: "burban-fidelity.firebaseapp.com",
            projectId: "burban-fidelity",
            storageBucket: "burban-fidelity.firebasestorage.app",
            messagingSenderId: "830299174800",
            appId: "1:830299174800:web:f50a4ec419e108f7f16515",
            measurementId: "G-E4QD4PYLM5"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        console.log('Initialisation Firebase...');
        window.firebaseAuth = auth;
        window.firebaseDb = db;
        window.firebaseModules = { createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, signOut, updateProfile, sendPasswordResetEmail, doc, setDoc, getDoc, updateDoc, arrayUnion, collection, getDocs, deleteDoc };
        window.firebaseReady = true;
        console.log('Firebase prÃªt');
    </script>
    <script src="js/loader.js"></script>
    <script src="js/app.js"></script>
    <script src="js/account.js"></script>
</body>
</html>
